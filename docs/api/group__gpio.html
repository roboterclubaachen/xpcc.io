<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>xpcc: General purpose input and/or output pins (GPIO)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">xpcc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>API</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="../index.html"><span>General</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__gpio.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">General purpose input and/or output pins (GPIO)<div class="ingroups"><a class="el" href="group__architecture.html">Architecture</a> &raquo; <a class="el" href="group__interface.html">Architecture Interfaces</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>These classes are used to create architecture independent definitions for hardware pins which then can be used as template parameters for miscellaneous device drivers.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_gpio_input.html">xpcc::GpioInput</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input interface of an I/O pin.  <a href="classxpcc_1_1_gpio_input.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_gpio_output.html">xpcc::GpioOutput</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output interface of an I/O pin.  <a href="classxpcc_1_1_gpio_output.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_gpio_i_o.html">xpcc::GpioIO</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input/Output interface of an I/O pin.  <a href="classxpcc_1_1_gpio_i_o.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_gpio_port.html">xpcc::GpioPort</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input/output interface of a set of up to 16 I/O pins.  <a href="classxpcc_1_1_gpio_port.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_gpio_expander.html">xpcc::GpioExpander</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface of an IO expander driver.  <a href="classxpcc_1_1_gpio_expander.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_gpio_expander_pin.html">xpcc::GpioExpanderPin&lt; GpioExpander, expander, pin &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an <code><a class="el" href="classxpcc_1_1_gpio_i_o.html" title="Input/Output interface of an I/O pin. ">xpcc::GpioIO</a></code> compatible interface from any IO-expander conforming to the <code><a class="el" href="classxpcc_1_1_gpio_expander.html" title="Interface of an IO expander driver. ">xpcc::GpioExpander</a></code> interface.  <a href="classxpcc_1_1_gpio_expander_pin.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_gpio_expander_port.html">xpcc::GpioExpanderPort&lt; GpioExpander, expander, StartPin, Width, DataOrder &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an <code><a class="el" href="classxpcc_1_1_gpio_port.html" title="Input/output interface of a set of up to 16 I/O pins. ">xpcc::GpioPort</a></code> compatible interface from any IO-expander conforming to the <code><a class="el" href="classxpcc_1_1_gpio_expander.html" title="Interface of an IO expander driver. ">xpcc::GpioExpander</a></code> interface.  <a href="classxpcc_1_1_gpio_expander_port.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_gpio_unused.html">xpcc::GpioUnused</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dummy implementation of an I/O pin.  <a href="classxpcc_1_1_gpio_unused.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_gpio_inverted.html">xpcc::GpioInverted&lt; Pin &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invert a pin in software.  <a href="classxpcc_1_1_gpio_inverted.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_software_gpio_port.html">xpcc::SoftwareGpioPort&lt; Gpios &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an up to 16-bit port from arbitrary pins.  <a href="classxpcc_1_1_software_gpio_port.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<dl class="section warning"><dt>Warning</dt><dd>When you use the pins directly outside any device driver class you have to remember to initialize them first. Call setInput() or setOutput() before the first use, otherwise the result is undefined and most likely not what you expect!</dd></dl>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;xpcc/architecture/platform.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;xpcc/driver/lcd/st7036.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">typedef</span> GpioOutputD7 Clk;</div>
<div class="line"><span class="keyword">typedef</span> GpioOutputD5 Mosi;</div>
<div class="line"></div>
<div class="line"><span class="keyword">typedef</span> GpioOutputD4 LcdCs;</div>
<div class="line"><span class="keyword">typedef</span> GpioOutputD0 LcdRs;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Create a new type for the software SPI for the display</span></div>
<div class="line"><span class="keyword">typedef</span> xpcc::SoftwareSimpleSpi&lt; Clk, Mosi &gt; SpiInterface;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Create a instance of the ST7036 based display class</span></div>
<div class="line"><a class="code" href="classxpcc_1_1_st7036.html">xpcc::St7036</a>&lt; SpiInterface,</div>
<div class="line">              LcdCs,</div>
<div class="line">              LcdRs &gt; display;</div>
<div class="line"></div>
<div class="line">...</div>
<div class="line">display.<a class="code" href="classxpcc_1_1_st7036.html#abca9ca37b61eaa22a41eb8ffc2b755d0">initialize</a>();</div>
<div class="line">display.setPosition(0, 0);</div>
<div class="line">display.write(<span class="stringliteral">&quot;Hallo Welt!&quot;</span>);</div>
</div><!-- fragment --><p>This example can be compiled for every AVR device without any change!</p>
<p>The pins don't need to initialized here because the initialize() method of the display does this for us.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classxpcc_1_1_st7036.html" title="Driver for ST7036 based LC-displays. ">xpcc::St7036</a></dd></dl>
<p>Creating a simple flashing light: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;xpcc/architecture/platform.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;xpcc/architecture/driver/delay.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">typedef</span> GpioOutputB0 Led;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main()</div>
<div class="line">{</div>
<div class="line">    Led::setOutput();</div>
<div class="line">    Led::set();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span> (1)</div>
<div class="line">    {</div>
<div class="line">        Led::toggle();</div>
<div class="line">        <a class="code" href="group__architecture.html#gae49a479a7541f0e2ec1b43d7672f82e1">xpcc::delayMilliseconds</a>(500);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This will generate nearly optimal code. As all methods are <code>static</code> and <code>inline</code> no function call is generated but the call is mapped directly to a <code>sbi</code> assembler instruction!</p>
<p>The generated code for the example above (ATmega8): </p><pre class="fragment"> ...
82: 20 9a          sbi  0x04, 0        ; Led::setOutput();
84: 28 9a          sbi  0x05, 0        ; Led::set();

86: 41 e0          ldi  r20, 0x01      ; Prelude for toggle and delay
88: 29 e9          ldi  r18, 0x99
8a: 35 e1          ldi  r19, 0x15

8c: 85 b1          in   r24, 0x05      ; Led::toggle();
8e: 84 27          eor  r24, r20
90: 85 b9          out  0x05, r24

92: c9 01          movw r24, r18       ; xpcc::delayMilliseconds(500);
94: 01 97          sbiw r24, 0x01
96: f1 f7          brne .-4            ; 0x94 &lt;main+0x12&gt;

98: f9 cf          rjmp .-14           ; 0x8c &lt;main+0xa&gt;
</pre><p>Or for the ATxmega128a1: </p><pre class="fragment"> ...
22e: 81 e0         ldi  r24, 0x01
230: 80 93 21 06   sts  0x0621, r24    ; Led::setOutput();
234: 80 93 25 06   sts  0x0625, r24    ; Led::set();

238: 41 e0         ldi  r20, 0x01      ; Prelude for toggle and delay
23a: 20 ee         ldi  r18, 0xE0
23c: 3e e2         ldi  r19, 0x2E

23e: 40 93 27 06   sts  0x0627, r20    ; Led::toggle();

242: c9 01         movw r24, r18       ; xpcc::delayMilliseconds(500);
244: 01 97         sbiw r24, 0x01
246: f1 f7         brne .-4            ; 0x244 &lt;main+0x16&gt;

248: fa cf         rjmp .-12           ; 0x23e &lt;main+0x10&gt;
</pre><p>As you can see, no function call whatsoever is involved!</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__driver.html" title="Drivers to control external devices. ">Device drivers</a> </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Fabian Greif </dd>
<dd>
Niklas Hauser </dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Apr 6 2017 23:40:45 for xpcc by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
