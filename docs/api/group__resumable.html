<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>xpcc: Resumables</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">xpcc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>API</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="../index.html"><span>General</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__resumable.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Resumables<div class="ingroups"><a class="el" href="group__processing.html">Processing</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>An implementation of lightweight resumable functions which allow for nested calling.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_nested_resumable.html">xpcc::NestedResumable&lt; Levels &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the base class which must be inherited from for using nested resumable functions in your class.  <a href="classxpcc_1_1_nested_resumable.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxpcc_1_1_resumable_result.html">xpcc::ResumableResult&lt; T &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">All resumable functions return an encapsulated result type.  <a href="structxpcc_1_1_resumable_result.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_resumable.html">xpcc::Resumable&lt; Functions &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classxpcc_1_1_resumable.html" title="Resumable base class. ">Resumable</a> base class.  <a href="classxpcc_1_1_resumable.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac8a210fcd55041e209c715e6c2d20046"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#gac8a210fcd55041e209c715e6c2d20046">RF_BEGIN</a>(index)</td></tr>
<tr class="memdesc:gac8a210fcd55041e209c715e6c2d20046"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare start of resumable function with index.  <a href="#gac8a210fcd55041e209c715e6c2d20046">More...</a><br /></td></tr>
<tr class="separator:gac8a210fcd55041e209c715e6c2d20046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb13fb5ba3b91305efb86b131157b7e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#gadb13fb5ba3b91305efb86b131157b7e1">RF_BEGIN</a>()</td></tr>
<tr class="memdesc:gadb13fb5ba3b91305efb86b131157b7e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare start of resumable function with index.  <a href="#gadb13fb5ba3b91305efb86b131157b7e1">More...</a><br /></td></tr>
<tr class="separator:gadb13fb5ba3b91305efb86b131157b7e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadae4d1967a2940541461c43be4e32772"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#gadae4d1967a2940541461c43be4e32772">RF_END_RETURN</a>(result)</td></tr>
<tr class="memdesc:gadae4d1967a2940541461c43be4e32772"><td class="mdescLeft">&#160;</td><td class="mdescRight">End the resumable function and return a result.  <a href="#gadae4d1967a2940541461c43be4e32772">More...</a><br /></td></tr>
<tr class="separator:gadae4d1967a2940541461c43be4e32772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2052f0001fb0e336a076e5e2c9ef769e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#ga2052f0001fb0e336a076e5e2c9ef769e">RF_END</a>()</td></tr>
<tr class="memdesc:ga2052f0001fb0e336a076e5e2c9ef769e"><td class="mdescLeft">&#160;</td><td class="mdescRight">End the resumable function.  <a href="#ga2052f0001fb0e336a076e5e2c9ef769e">More...</a><br /></td></tr>
<tr class="separator:ga2052f0001fb0e336a076e5e2c9ef769e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab96493c0cfb6c1da968c8dfb0d39ba3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#gab96493c0cfb6c1da968c8dfb0d39ba3f">RF_END_RETURN_CALL</a>(resumable)</td></tr>
<tr class="memdesc:gab96493c0cfb6c1da968c8dfb0d39ba3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">End the resumable function by calling another resumable function and returning its result.  <a href="#gab96493c0cfb6c1da968c8dfb0d39ba3f">More...</a><br /></td></tr>
<tr class="separator:gab96493c0cfb6c1da968c8dfb0d39ba3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50fda47255530910b40d0e883b097f68"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga50fda47255530910b40d0e883b097f68"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#ga50fda47255530910b40d0e883b097f68">RF_YIELD</a>()</td></tr>
<tr class="memdesc:ga50fda47255530910b40d0e883b097f68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yield resumable function until next invocation. <br /></td></tr>
<tr class="separator:ga50fda47255530910b40d0e883b097f68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac58b699432d4e11a92a7e10c5bb8b36d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac58b699432d4e11a92a7e10c5bb8b36d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#gac58b699432d4e11a92a7e10c5bb8b36d">RF_WAIT_THREAD</a>(child)</td></tr>
<tr class="memdesc:gac58b699432d4e11a92a7e10c5bb8b36d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cause resumable function to wait until given child protothread completes. <br /></td></tr>
<tr class="separator:gac58b699432d4e11a92a7e10c5bb8b36d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga28077ce37251f81f1def791421af551d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga28077ce37251f81f1def791421af551d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#ga28077ce37251f81f1def791421af551d">RF_WAIT_WHILE</a>(condition)</td></tr>
<tr class="memdesc:ga28077ce37251f81f1def791421af551d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cause resumable function to wait <b>while</b> given <code>condition</code> is true. <br /></td></tr>
<tr class="separator:ga28077ce37251f81f1def791421af551d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf68766e4a9dae0d7b42b0e82d3d3f7ad"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf68766e4a9dae0d7b42b0e82d3d3f7ad"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#gaf68766e4a9dae0d7b42b0e82d3d3f7ad">RF_WAIT_UNTIL</a>(condition)</td></tr>
<tr class="memdesc:gaf68766e4a9dae0d7b42b0e82d3d3f7ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cause resumable function to wait <b>until</b> given <code>condition</code> is true. <br /></td></tr>
<tr class="separator:gaf68766e4a9dae0d7b42b0e82d3d3f7ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6201af643c44f46e0448a2fb612a03b2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6201af643c44f46e0448a2fb612a03b2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#ga6201af643c44f46e0448a2fb612a03b2">RF_CALL</a>(resumable)</td></tr>
<tr class="memdesc:ga6201af643c44f46e0448a2fb612a03b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls a resumable function and returns its result. <br /></td></tr>
<tr class="separator:ga6201af643c44f46e0448a2fb612a03b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd59ed8e97e74cda1c1ef58fcee95988"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#gafd59ed8e97e74cda1c1ef58fcee95988">RF_CALL_BLOCKING</a>(resumable)</td></tr>
<tr class="memdesc:gafd59ed8e97e74cda1c1ef58fcee95988"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls a resumable function, busy-waits and returns its result.  <a href="#gafd59ed8e97e74cda1c1ef58fcee95988">More...</a><br /></td></tr>
<tr class="separator:gafd59ed8e97e74cda1c1ef58fcee95988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaefb8c4d6c23c55a9718295ef5810cff2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaefb8c4d6c23c55a9718295ef5810cff2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#gaefb8c4d6c23c55a9718295ef5810cff2">RF_RETURN_CALL</a>(resumable)</td></tr>
<tr class="memdesc:gaefb8c4d6c23c55a9718295ef5810cff2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exits a resumable function and returns another resumable function's result. <br /></td></tr>
<tr class="separator:gaefb8c4d6c23c55a9718295ef5810cff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51baeaa00320b4f640c229ff8dbf7ef8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#ga51baeaa00320b4f640c229ff8dbf7ef8">RF_RETURN</a>(result)</td></tr>
<tr class="memdesc:ga51baeaa00320b4f640c229ff8dbf7ef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop and exit from resumable function with a result.  <a href="#ga51baeaa00320b4f640c229ff8dbf7ef8">More...</a><br /></td></tr>
<tr class="separator:ga51baeaa00320b4f640c229ff8dbf7ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga068f9f637000e3da0f8d04d8b4e88f95"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#ga068f9f637000e3da0f8d04d8b4e88f95">RF_RETURN</a>()</td></tr>
<tr class="memdesc:ga068f9f637000e3da0f8d04d8b4e88f95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop and exit from resumable function with a result.  <a href="#ga068f9f637000e3da0f8d04d8b4e88f95">More...</a><br /></td></tr>
<tr class="separator:ga068f9f637000e3da0f8d04d8b4e88f95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10fc62ea34c6aa7550012b8a0f8bc9f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resumable.html#ga10fc62ea34c6aa7550012b8a0f8bc9f3">XPCC_RESUMABLE_CHECK_NESTING_DEPTH</a></td></tr>
<tr class="memdesc:ga10fc62ea34c6aa7550012b8a0f8bc9f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nested Resumables protect against memory corruption by checking if the nesting level is within the allocated nesting level depth.  <a href="#ga10fc62ea34c6aa7550012b8a0f8bc9f3">More...</a><br /></td></tr>
<tr class="separator:ga10fc62ea34c6aa7550012b8a0f8bc9f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3cdcb2320588a11410e76290e08fb296"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3cdcb2320588a11410e76290e08fb296"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>XPCC_RESUMABLE_MODULE_NAME</b></td></tr>
<tr class="separator:ga3cdcb2320588a11410e76290e08fb296"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This base class and its macros allows you to implement and use several resumable functions in one class. This allows you to modularize your code by placing it into its own resumable functions instead of the placing everything into one big method. It also allows you to call and run resumable functions within your resumables, so you can reuse their functionality.</p>
<p>Note that you should call resumable functions within a protothreads. It is sufficient to use the <code>this</code> pointer of the class as context when calling the resumables. So calling a resumable function is done using <code><a class="el" href="group__protothread.html#gaeb2e9a2948001a68950eb6d8b26f0dbd" title="Calls a given resumable function and returns whether it completed successfully or not...">PT_CALL(resumable(this))</a></code> which will return the result of the resumable function.</p>
<p>You may use the <code><a class="el" href="group__resumable.html#gafd59ed8e97e74cda1c1ef58fcee95988" title="Calls a resumable function, busy-waits and returns its result. ">RF_CALL_BLOCKING(resumable(ctx))</a></code> macro to execute a resumable function outside of a protothread, however, this which will force the CPU to busy-wait until the resumable function ended.</p>
<p>Here is a (slightly over-engineered) example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;xpcc/architecture.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;xpcc/processing.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">typedef</span> GpioOutputB0 Led;</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>BlinkingLight : <span class="keyword">public</span> <a class="code" href="classxpcc_1_1pt_1_1_protothread.html">xpcc::pt::Protothread</a>, <span class="keyword">private</span> <a class="code" href="classxpcc_1_1_nested_resumable.html">xpcc::NestedResumable</a>&lt;2&gt;</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">bool</span></div>
<div class="line">    run()</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__protothread.html#ga6da3471eb116970eb1dce79bfcc7cd3e">PT_BEGIN</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// set everything up</span></div>
<div class="line">        Led::setOutput();</div>
<div class="line">        Led::set();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line">        {</div>
<div class="line">            Led::set();</div>
<div class="line">            <a class="code" href="group__protothread.html#gaeb2e9a2948001a68950eb6d8b26f0dbd">PT_CALL</a>(waitForTimer()))</div>
<div class="line"></div>
<div class="line">            Led::reset();</div>
<div class="line">            <a class="code" href="group__protothread.html#gaeb2e9a2948001a68950eb6d8b26f0dbd">PT_CALL</a>(setTimer(200));</div>
<div class="line"></div>
<div class="line">            <a class="code" href="group__protothread.html#ga742a4c6aa99440473f54651233ebd28b">PT_WAIT_UNTIL</a>(timeout.isExpired());</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="group__protothread.html#ga146c4bb0e1f9f2020cd12b8dd7ff076e">PT_END</a>();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="structxpcc_1_1_resumable_result.html">xpcc::ResumableResult&lt;bool&gt;</a></div>
<div class="line">    waitForTimer()</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__resumable.html#gac8a210fcd55041e209c715e6c2d20046">RF_BEGIN</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// nested calling is allowed</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__resumable.html#ga6201af643c44f46e0448a2fb612a03b2">RF_CALL</a>(setTimer(100)))</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__resumable.html#gaf68766e4a9dae0d7b42b0e82d3d3f7ad">RF_WAIT_UNTIL</a>(timeout.isExpired());</div>
<div class="line">            <a class="code" href="group__resumable.html#ga51baeaa00320b4f640c229ff8dbf7ef8">RF_RETURN</a>(<span class="keyword">true</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="group__resumable.html#gadae4d1967a2940541461c43be4e32772">RF_END_RETURN</a>(<span class="keyword">false</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="structxpcc_1_1_resumable_result.html">xpcc::ResumableResult&lt;bool&gt;</a></div>
<div class="line">    setTimer(uint16_t timeout)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__resumable.html#gac8a210fcd55041e209c715e6c2d20046">RF_BEGIN</a>();</div>
<div class="line"></div>
<div class="line">        timeout.restart(timeout);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>(timeout.isRunning())</div>
<div class="line">            <a class="code" href="group__resumable.html#ga51baeaa00320b4f640c229ff8dbf7ef8">RF_RETURN</a>(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// clean up code goes here</span></div>
<div class="line"></div>
<div class="line">        <a class="code" href="group__resumable.html#gadae4d1967a2940541461c43be4e32772">RF_END_RETURN</a>(<span class="keyword">false</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <a class="code" href="classxpcc_1_1_generic_timeout.html">xpcc::ShortTimeout</a> timeout;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">...</div>
<div class="line">BlinkingLight light;</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">while</span> (...) {</div>
<div class="line">    light.run();</div>
<div class="line">}</div>
</div><!-- fragment --><p>For other examples take a look in the <code>examples</code> folder in the XPCC root folder. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gac8a210fcd55041e209c715e6c2d20046"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RF_BEGIN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Declare start of a nested resumable function.</p>
<dl class="section warning"><dt>Warning</dt><dd>Use at start of the <code>resumable()</code> implementation!</dd></dl>
<p>This will immidiately return if the nesting is too deep.</p>
<dl class="section warning"><dt>Warning</dt><dd>Use at start of the <code>resumable()</code> implementation! </dd></dl>

</div>
</div>
<a class="anchor" id="gadb13fb5ba3b91305efb86b131157b7e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RF_BEGIN</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Declare start of a nested resumable function.</p>
<dl class="section warning"><dt>Warning</dt><dd>Use at start of the <code>resumable()</code> implementation!</dd></dl>
<p>This will immidiately return if the nesting is too deep.</p>
<dl class="section warning"><dt>Warning</dt><dd>Use at start of the <code>resumable()</code> implementation! </dd></dl>

</div>
</div>
<a class="anchor" id="gadae4d1967a2940541461c43be4e32772"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RF_END_RETURN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">result</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section warning"><dt>Warning</dt><dd>Use at end of the <code>resumable()</code> implementation only! </dd></dl>

</div>
</div>
<a class="anchor" id="ga2052f0001fb0e336a076e5e2c9ef769e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RF_END</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>You can use this to return <code>void</code>, or if the result does not matter.</p>
<dl class="section warning"><dt>Warning</dt><dd>Use at end of the <code>resumable()</code> implementation only! </dd></dl>

</div>
</div>
<a class="anchor" id="gab96493c0cfb6c1da968c8dfb0d39ba3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RF_END_RETURN_CALL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">resumable</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section warning"><dt>Warning</dt><dd>Use at end of the <code>resumable()</code> implementation only! </dd></dl>

</div>
</div>
<a class="anchor" id="gafd59ed8e97e74cda1c1ef58fcee95988"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RF_CALL_BLOCKING</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">resumable</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section warning"><dt>Warning</dt><dd>Use this with extreme caution, this can cause deadlocks! </dd></dl>

</div>
</div>
<a class="anchor" id="ga51baeaa00320b4f640c229ff8dbf7ef8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RF_RETURN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">result</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop and exit from resumable function of <code>void</code> return type. </p>

</div>
</div>
<a class="anchor" id="ga068f9f637000e3da0f8d04d8b4e88f95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RF_RETURN</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop and exit from resumable function of <code>void</code> return type. </p>

</div>
</div>
<a class="anchor" id="ga10fc62ea34c6aa7550012b8a0f8bc9f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XPCC_RESUMABLE_CHECK_NESTING_DEPTH</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If the allocated nesting level is exceeded, the resumable function does not execute, but returns the <code>xpcc::rf::NestingError</code> state value. However, the <code><a class="el" href="group__protothread.html#gaeb2e9a2948001a68950eb6d8b26f0dbd" title="Calls a given resumable function and returns whether it completed successfully or not...">PT_CALL()</a></code> or <code><a class="el" href="group__resumable.html#ga6201af643c44f46e0448a2fb612a03b2" title="Calls a resumable function and returns its result. ">RF_CALL()</a></code> macros are not constructed to handle this error and will interpret this error as a normal resumable function stop and therefore immediately continue program execution.</p>
<p>Since the required nesting depth of a nested resumable function can be known before runtime by looking at the source code and counting the nesting levels, this check acts only as a protection against executing random code, when entering too many levels. So instead of the entire program crashing, the resumable function simply does not execute at all, which can make it easier to track down the problem too few allocated nesting levels.</p>
<p>You as a programmer are responible for allocating the correct amount of nesting levels! However, if you are sure that you have counted the levels correctly and your code is not breaking, you may remove this check from all resumable functions in your <code>project.cfg</code>:</p>
<pre class="fragment">[defines]
XPCC_RESUMABLE_CHECK_NESTING_DEPTH = false
</pre><dl class="section see"><dt>See also</dt><dd>NestedResumable </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 5 2017 22:29:36 for xpcc by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
