<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>xpcc: xpcc::IODeviceWrapper&lt; Device, behavior &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">xpcc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>API</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="../index.html"><span>General</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classxpcc_1_1_i_o_device_wrapper.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="classxpcc_1_1_i_o_device_wrapper-members.html">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">xpcc::IODeviceWrapper&lt; Device, behavior &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__io.html">IO-Classes</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Wrapper to use any peripheral device that supports static <a class="el" href="classxpcc_1_1_i_o_device_wrapper.html#a886af16adaf020f96f4a34b49d73301b" title="Write a single character. ">write()</a> and <a class="el" href="classxpcc_1_1_i_o_device_wrapper.html#ace02e9f956254a06a0ea81f1e4bdad93" title="Read a single character. ">read()</a> as an <a class="el" href="classxpcc_1_1_i_o_device.html" title="Abstract calls of IO devices. ">IODevice</a>.  
 <a href="classxpcc_1_1_i_o_device_wrapper.html#details">More...</a></p>

<p><code>#include &lt;xpcc/io/iodevice_wrapper.hpp&gt;</code></p>
<div class="dynheader">
Inheritance diagram for xpcc::IODeviceWrapper&lt; Device, behavior &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classxpcc_1_1_i_o_device_wrapper.png" usemap="#xpcc::IODeviceWrapper&lt; Device, behavior &gt;_map" alt=""/>
  <map id="xpcc::IODeviceWrapper&lt; Device, behavior &gt;_map" name="xpcc::IODeviceWrapper&lt; Device, behavior &gt;_map">
<area href="classxpcc_1_1_i_o_device.html" title="Abstract calls of IO devices. " alt="xpcc::IODevice" shape="rect" coords="0,0,270,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae20f03b681d72c5f34685ab8010fa8c9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_i_o_device_wrapper.html#ae20f03b681d72c5f34685ab8010fa8c9">IODeviceWrapper</a> (const Device &amp;)</td></tr>
<tr class="memdesc:ae20f03b681d72c5f34685ab8010fa8c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ae20f03b681d72c5f34685ab8010fa8c9">More...</a><br /></td></tr>
<tr class="separator:ae20f03b681d72c5f34685ab8010fa8c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a886af16adaf020f96f4a34b49d73301b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a886af16adaf020f96f4a34b49d73301b"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_i_o_device_wrapper.html#a886af16adaf020f96f4a34b49d73301b">write</a> (char c)</td></tr>
<tr class="memdesc:a886af16adaf020f96f4a34b49d73301b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a single character. <br /></td></tr>
<tr class="separator:a886af16adaf020f96f4a34b49d73301b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5953fbd6acaf055b3f8a328eb166f3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9b5953fbd6acaf055b3f8a328eb166f3"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_i_o_device_wrapper.html#a9b5953fbd6acaf055b3f8a328eb166f3">write</a> (const char *s)</td></tr>
<tr class="memdesc:a9b5953fbd6acaf055b3f8a328eb166f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a C-string. <br /></td></tr>
<tr class="separator:a9b5953fbd6acaf055b3f8a328eb166f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a37dd42da7cfbaf23c92187d6fe44c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a37dd42da7cfbaf23c92187d6fe44c1"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>flush</b> ()</td></tr>
<tr class="separator:a1a37dd42da7cfbaf23c92187d6fe44c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace02e9f956254a06a0ea81f1e4bdad93"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace02e9f956254a06a0ea81f1e4bdad93"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_i_o_device_wrapper.html#ace02e9f956254a06a0ea81f1e4bdad93">read</a> (char &amp;c)</td></tr>
<tr class="memdesc:ace02e9f956254a06a0ea81f1e4bdad93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single character. <br /></td></tr>
<tr class="separator:ace02e9f956254a06a0ea81f1e4bdad93"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class Device, IOBuffer behavior&gt;<br />
class xpcc::IODeviceWrapper&lt; Device, behavior &gt;</h3>

<p>You have to decide what happens when the device buffer is full and you cannot write to it at the moment. There are two options:</p><ol type="1">
<li>busy wait until the buffer is free, or</li>
<li>discard the bytes that cannot be written.</li>
</ol>
<p>Option 1 has the advantage, that none of your data will be lost, however, busy-waiting can take a long time and can mess up your program timings. There is also a <b>high risk of deadlock</b>, when writing to a <a class="el" href="classxpcc_1_1_i_o_device.html" title="Abstract calls of IO devices. ">IODevice</a> inside of an interrupt and then busy-waiting forever because the <a class="el" href="classxpcc_1_1_i_o_device.html" title="Abstract calls of IO devices. ">IODevice</a> requires interrupts itself to send out the data.</p>
<p>It is therefore highly recommended to use option 2, where surplus data will be discarded. You should increase the <a class="el" href="classxpcc_1_1_i_o_device.html" title="Abstract calls of IO devices. ">IODevice</a> buffer size, if you experience missing data from your connection. This behavior is also deadlock safe when called from inside another interrupt, and your program timing is minimally affected (essentially only coping data into the buffer).</p>
<p>There is no default template argument, so that you hopefully make a concious decision and be aware of this behavior.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="comment">// configure a UART</span></div>
<div class="line">Uart0 uart;</div>
<div class="line"></div>
<div class="line"><span class="comment">// wrap it into an IODevice</span></div>
<div class="line"><a class="code" href="classxpcc_1_1_i_o_device_wrapper.html">xpcc::IODeviceWrapper&lt;Uart0, xpcc::IOBuffer::DiscardIfFull&gt;</a> device;</div>
<div class="line"></div>
<div class="line"><span class="comment">// use this device to print a message</span></div>
<div class="line">device.<a class="code" href="classxpcc_1_1_i_o_device_wrapper.html#a886af16adaf020f96f4a34b49d73301b">write</a>(<span class="stringliteral">&quot;Hello&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// or create a IOStream and use the stream to print something</span></div>
<div class="line"><a class="code" href="classxpcc_1_1_i_o_stream.html">xpcc::IOStream</a> stream(device);</div>
<div class="line">stream &lt;&lt; <span class="stringliteral">&quot; World!&quot;</span>;</div>
</div><!-- fragment --><dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Device</td><td><a class="el" href="classxpcc_1_1_peripheral.html" title="Peripheral class. ">Peripheral</a> which should be wrapped </td></tr>
    <tr><td class="paramname">behavior</td><td>preferred behavior when the Device buffer is full </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae20f03b681d72c5f34685ab8010fa8c9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Device, IOBuffer behavior&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classxpcc_1_1_i_o_device_wrapper.html">xpcc::IODeviceWrapper</a>&lt; Device, behavior &gt;::<a class="el" href="classxpcc_1_1_i_o_device_wrapper.html">IODeviceWrapper</a> </td>
          <td>(</td>
          <td class="paramtype">const Device &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>configured object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>iodevice_wrapper.hpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacexpcc.html">xpcc</a></li><li class="navelem"><a class="el" href="classxpcc_1_1_i_o_device_wrapper.html">IODeviceWrapper</a></li>
    <li class="footer">Generated on Fri May 5 2017 22:29:37 for xpcc by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
