<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>xpcc: xpcc::AD840x&lt; Spi, Cs, Rs, Shdn &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">xpcc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>API</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="../index.html"><span>General</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classxpcc_1_1_a_d840x.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="classxpcc_1_1_a_d840x-members.html">List of all members</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">xpcc::AD840x&lt; Spi, Cs, Rs, Shdn &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__driver.html">Device drivers</a> &raquo; <a class="el" href="group__driver__other.html">Other</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>AD8400/2/3 Digital Potentiometers (1-,2-,4-Channel)  
 <a href="classxpcc_1_1_a_d840x.html#details">More...</a></p>

<p><code>#include &lt;xpcc/driver/other/ad840x.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad23b04f3e8cb238a427b54bc4d96a2e2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad23b04f3e8cb238a427b54bc4d96a2e2"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#ad23b04f3e8cb238a427b54bc4d96a2e2">initialize</a> ()</td></tr>
<tr class="memdesc:ad23b04f3e8cb238a427b54bc4d96a2e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPI interface and set pins. <br /></td></tr>
<tr class="separator:ad23b04f3e8cb238a427b54bc4d96a2e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f4fab3c7fe1826dd2d2bf064f749fe4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#a7f4fab3c7fe1826dd2d2bf064f749fe4">reset</a> ()</td></tr>
<tr class="memdesc:a7f4fab3c7fe1826dd2d2bf064f749fe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset channels.  <a href="#a7f4fab3c7fe1826dd2d2bf064f749fe4">More...</a><br /></td></tr>
<tr class="separator:a7f4fab3c7fe1826dd2d2bf064f749fe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab96e6384c48b7ab3c13f0cd6cdc8ece"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#aab96e6384c48b7ab3c13f0cd6cdc8ece">shutdown</a> ()</td></tr>
<tr class="memdesc:aab96e6384c48b7ab3c13f0cd6cdc8ece"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter shutdown mode.  <a href="#aab96e6384c48b7ab3c13f0cd6cdc8ece">More...</a><br /></td></tr>
<tr class="separator:aab96e6384c48b7ab3c13f0cd6cdc8ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f270aa2f22497183a54a7c90d93369"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a93f270aa2f22497183a54a7c90d93369"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#a93f270aa2f22497183a54a7c90d93369">resume</a> ()</td></tr>
<tr class="memdesc:a93f270aa2f22497183a54a7c90d93369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume normal mode after shutdown. <br /></td></tr>
<tr class="separator:a93f270aa2f22497183a54a7c90d93369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ded5a84f5cda5947a60cccd6948bef8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#a3ded5a84f5cda5947a60cccd6948bef8">setValue</a> (<a class="el" href="group__driver__other.html#ga4c936afae0f4c1ab27a131d65711d4ae">ad840x::Channel</a> channel, uint8_t data)</td></tr>
<tr class="memdesc:a3ded5a84f5cda5947a60cccd6948bef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a new register value.  <a href="#a3ded5a84f5cda5947a60cccd6948bef8">More...</a><br /></td></tr>
<tr class="separator:a3ded5a84f5cda5947a60cccd6948bef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Spi, typename Cs, typename Rs, typename Shdn&gt;<br />
class xpcc::AD840x&lt; Spi, Cs, Rs, Shdn &gt;</h3>

<h2>Features</h2>
<ul>
<li>256-position variable resistance device</li>
<li>Replaces 1, 2, or 4 potentiometers</li>
<li>1 kΩ, 10 kΩ, 50 kΩ, 100 kΩ nominal resistance</li>
<li>3-wire, SPI-compatible serial data input</li>
<li>10 MHz update data loading rate</li>
<li>2.7 V to 5.5 V single-supply operation</li>
</ul>
<p>The nominal resistance of the VR (Variable Resistor) (RDAC) between Terminal A and Terminal B is available with values of 1 kΩ, 10 kΩ, 50 kΩ, and 100 kΩ. The final digits of the part number determine the nominal resistance value; that is, 10 kΩ = 10; 100 kΩ = 100 etc.</p>
<p>The nominal resistance (RAB) of the VR has 256 contact points accessible by the wiper terminal. The <a class="el" href="classxpcc_1_1_a_d840x.html" title="AD8400/2/3 Digital Potentiometers (1-,2-,4-Channel) ">AD840x</a> do not have power-on midscale preset, so the wiper can be at any random position at power-up.</p>
<h2>Serial Connection</h2>
<p>Data is shifted in on the positive edges of the clock (SPI Mode 0). Maximum SPI frequency is 10 MHz.</p>
<p>The output is updated after the time ts after the rising edge of CS. ts depends on the nominal resistance value.</p>
<div class="fragment"><div class="line">Version | Time ts</div>
<div class="line">--------+---------</div>
<div class="line">  10 kΩ |   2 µs</div>
<div class="line">  50 kΩ |   9 µs</div>
<div class="line"> 100 kΩ |  18 µs</div>
</div><!-- fragment --><p>The serial data output (SDO) pin, which exists only on the AD8403 and not on the AD8400 or AD8402, contains an open-drain, n-channel FET that requires a pull-up resistor to transfer data to the SDI pin of the next package.</p>
<p>The pull-up resistor termination voltage may be larger than the VDD supply (but less than the max VDD of 8 V) of the AD8403 SDO output device.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname"><a class="el" href="structxpcc_1_1_spi.html">Spi</a></td><td>SPI interface (MISO pin is not used) </td></tr>
    <tr><td class="paramname">Cs</td><td>Chip-Select pin </td></tr>
    <tr><td class="paramname">Rs</td><td>Reset (low active), use xpcc::Unused for the AD8400 </td></tr>
    <tr><td class="paramname">Shdn</td><td>Shutdown (low active), use xpcc::Unused for the AD8400</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>ad840x </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Fabian Greif </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7f4fab3c7fe1826dd2d2bf064f749fe4"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Spi , typename Cs , typename Rs , typename Shdn &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="classxpcc_1_1_a_d840x.html">xpcc::AD840x</a>&lt; <a class="el" href="structxpcc_1_1_spi.html">Spi</a>, Cs, Rs, Shdn &gt;::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Forces the whiper positions to 0x80 = 128 = midscale. </p>

</div>
</div>
<a class="anchor" id="aab96e6384c48b7ab3c13f0cd6cdc8ece"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Spi , typename Cs , typename Rs , typename Shdn &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="classxpcc_1_1_a_d840x.html">xpcc::AD840x</a>&lt; <a class="el" href="structxpcc_1_1_spi.html">Spi</a>, Cs, Rs, Shdn &gt;::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section warning"><dt>Warning</dt><dd>Only for AD8402 and AD8403</dd></dl>
<p>Both parts have a power shutdown SHDN pin that places the VR (variable resistor) in a zero-power-consumption state where Terminal Ax is open-circuited and the Wiper Wx is connected to Terminal Bx, resulting in the consumption of only the leakage current in the VR.</p>
<p>The digital interface is still active in shutdown, except that SDO is deactivated. Code changes in the registers can be made during shutdown that will produce new wiper positions when the device is taken out of shutdown. </p>

</div>
</div>
<a class="anchor" id="a3ded5a84f5cda5947a60cccd6948bef8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Spi , typename Cs , typename Rs , typename Shdn &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="classxpcc_1_1_a_d840x.html">xpcc::AD840x</a>&lt; <a class="el" href="structxpcc_1_1_spi.html">Spi</a>, Cs, Rs, Shdn &gt;::setValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__other.html#ga4c936afae0f4c1ab27a131d65711d4ae">ad840x::Channel</a>&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The wiper’s first connection starts at the B terminal for data 00H. This B terminal connection has a wiper contact resistance of 50 Ω. The second connection (for the 10 kΩ part) is the first tap point located at 89 Ω = [RAB (nominal resistance) + RW = 39 Ω + 50 Ω] for data 01H. The third connection is the next tap point representing 78 Ω + 50 Ω = 128 Ω for data 02H. Each LSB data value increase moves the wiper up the resistor ladder until the last tap point is reached at 10,011 Ω.</p>
<p>Note that the wiper does not directly connect to the B terminal even for data 00H.</p>
<div class="fragment"><div class="line">data | Rwb (Ohm) | Output State</div>
<div class="line">-----+-----------+-----------------</div>
<div class="line"> 255 |   10 011  | Full scale</div>
<div class="line"> 128 |    5 050  | Midscale (<a class="code" href="classxpcc_1_1_a_d840x.html#a7f4fab3c7fe1826dd2d2bf064f749fe4">reset</a>() condition)</div>
<div class="line">   1 |       89  | 1 LSB</div>
<div class="line">   0 |       50  | Zero-scale (wiper contact resistance)</div>
</div><!-- fragment --><p>Rwb is the resistance between the wiper and Terminal B. The resitance for Terminal A is symmetrical:</p>
<div class="fragment"><div class="line">data | Rwa (Ohm) | Output State</div>
<div class="line">-----+-----------+-----------------</div>
<div class="line"> 255 |       89  | Full scale</div>
<div class="line"> 128 |    5 050  | Midscale (<a class="code" href="classxpcc_1_1_a_d840x.html#a7f4fab3c7fe1826dd2d2bf064f749fe4">reset</a>() condition)</div>
<div class="line">   1 |   10 011  | 1 LSB</div>
<div class="line">   0 |   10 050  | Zero-scale</div>
</div><!-- fragment --><p>It is possible to set up all four channels at once by using the shutdown mode and then setting all four channels individually. After resuming normal operation the wipers will take their new positions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>Channel which should be changed </td></tr>
    <tr><td class="paramname">data</td><td>New wiper value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ad840x.hpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacexpcc.html">xpcc</a></li><li class="navelem"><a class="el" href="classxpcc_1_1_a_d840x.html">AD840x</a></li>
    <li class="footer">Generated on Sun Nov 20 2016 22:41:21 for xpcc by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
