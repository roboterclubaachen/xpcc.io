<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>xpcc: xpcc::GenericPeriodicTimer&lt; Clock, TimestampType &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">xpcc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classxpcc_1_1_generic_periodic_timer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="classxpcc_1_1_generic_periodic_timer-members.html">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">xpcc::GenericPeriodicTimer&lt; Clock, TimestampType &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__processing.html">Processing</a> &raquo; <a class="el" href="group__software__timer.html">Software Timers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic software timeout class for variable timebase and timestamp width.  
 <a href="classxpcc_1_1_generic_periodic_timer.html#details">More...</a></p>

<p><code>#include &lt;xpcc/processing/timer/periodic_timer.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0bd9d91f101dd3205fa905a398df92e5"><td class="memItemLeft" align="right" valign="top"><a id="a0bd9d91f101dd3205fa905a398df92e5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a0bd9d91f101dd3205fa905a398df92e5">GenericPeriodicTimer</a> (const TimestampType period)</td></tr>
<tr class="memdesc:a0bd9d91f101dd3205fa905a398df92e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and start the timer. <br /></td></tr>
<tr class="separator:a0bd9d91f101dd3205fa905a398df92e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d99901a47a34a02830f1acfbe2eed25"><td class="memItemLeft" align="right" valign="top"><a id="a5d99901a47a34a02830f1acfbe2eed25"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a5d99901a47a34a02830f1acfbe2eed25">restart</a> ()</td></tr>
<tr class="memdesc:a5d99901a47a34a02830f1acfbe2eed25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restart the timer with the current period. <br /></td></tr>
<tr class="separator:a5d99901a47a34a02830f1acfbe2eed25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a63783b8a78ae468d74459e9aabd38"><td class="memItemLeft" align="right" valign="top"><a id="a51a63783b8a78ae468d74459e9aabd38"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a51a63783b8a78ae468d74459e9aabd38">restart</a> (const TimestampType period)</td></tr>
<tr class="memdesc:a51a63783b8a78ae468d74459e9aabd38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restart the timer with a new period value. <br /></td></tr>
<tr class="separator:a51a63783b8a78ae468d74459e9aabd38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed61c10303a883b47ed0a1bdba141b1"><td class="memItemLeft" align="right" valign="top"><a id="abed61c10303a883b47ed0a1bdba141b1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#abed61c10303a883b47ed0a1bdba141b1">stop</a> ()</td></tr>
<tr class="memdesc:abed61c10303a883b47ed0a1bdba141b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the timer and sets <a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a7624cbce4fb8c4be66a63740a5e9b484">isStopped()</a> to <code>true</code>, and isExpired() to <code>false</code>. <br /></td></tr>
<tr class="separator:abed61c10303a883b47ed0a1bdba141b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bef026e4e683303266e2bebe538c63f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a2bef026e4e683303266e2bebe538c63f">execute</a> ()</td></tr>
<tr class="separator:a2bef026e4e683303266e2bebe538c63f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e261e9debd8c4aa650e9d5aedd7314"><td class="memItemLeft" align="right" valign="top">TimestampType::SignedType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a36e261e9debd8c4aa650e9d5aedd7314">remaining</a> () const</td></tr>
<tr class="separator:a36e261e9debd8c4aa650e9d5aedd7314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac70aa47213a9117802e74e4291acab87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__software__timer.html#gabcc9087dd7bf4f67559efacad4f622d8">PeriodicTimerState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#ac70aa47213a9117802e74e4291acab87">getState</a> () const</td></tr>
<tr class="separator:ac70aa47213a9117802e74e4291acab87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7624cbce4fb8c4be66a63740a5e9b484"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a7624cbce4fb8c4be66a63740a5e9b484">isStopped</a> () const</td></tr>
<tr class="separator:a7624cbce4fb8c4be66a63740a5e9b484"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class Clock, typename TimestampType = xpcc::Timestamp&gt;<br />
class xpcc::GenericPeriodicTimer&lt; Clock, TimestampType &gt;</h3>

<p>This class allows for periodic code execution</p>
<p>Its logic can be described by the following annotated waveform:</p>
<ul>
<li>C: Constructor</li>
<li>S: (Re-)Start timer</li>
<li>I: Period interval</li>
<li>H: Code handler (<code><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a2bef026e4e683303266e2bebe538c63f">execute()</a></code> returned <code>true</code>)</li>
<li>P: Stop timer</li>
</ul>
<pre class="fragment">Event:    C         IH        I         I  H      I  S    IH   I    IH  P
                     _         _____________       __      _    ______
Expired:  __________/ \_______/             \_____/  \____/ \__/      \____...
          __________   _______               _____    ____   __        _
Armed:              \_/       \_____________/     \__/    \_/  \______/ \__...
                                                                         __
Stopped:  ______________________________________________________________/  ...

                     _                     _               _         _
Handle:   __________/ \___________________/ \_____________/ \_______/ \____...

Remaining:     +    |0|   +   |     -     |0|  +  | -|  + |0| +| -  |0|+| 0
</pre><p>If you want to execute code once per period interval, poll the <code><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a2bef026e4e683303266e2bebe538c63f">execute()</a></code> method, which returns <code>true</code> exactly once after expiration.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (timer.execute())</div><div class="line">{</div><div class="line">    <span class="comment">// periodically called once</span></div><div class="line">    Led::toggle();</div><div class="line">}</div></div><!-- fragment --><p>Be aware, however, that since this method is polled, it cannot execute exactly at the time of expiration, but some time after expiration, as indicated in the above waveform graph. If one or several periods are missed when polling <code><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a2bef026e4e683303266e2bebe538c63f">execute()</a></code>, these code executions are discarded and will not be cought up. Instead, <code><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a2bef026e4e683303266e2bebe538c63f">execute()</a></code> returns <code>true</code> once and then reschedules itself for the next period, without any period skewing.</p>
<dl class="section warning"><dt>Warning</dt><dd>Never use this class when a precise timebase is needed!</dd></dl>
<p>Notice, that the <code>PeriodicTimerState::Expired</code> is reset to <code>PeriodicTimerState::Armed</code> only after <code><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a2bef026e4e683303266e2bebe538c63f">execute()</a></code> has returned <code>true</code>. This is different to the behavior of <a class="el" href="classxpcc_1_1_generic_timeout.html" title="Generic software timeout class for variable timebase and timestamp width. ">GenericTimeout</a>, where calls to <code><a class="el" href="classxpcc_1_1_generic_timeout.html#a663cc82e4c469d5ccd2047fd035613d5">GenericTimeout::execute()</a></code> have no impact on class state.</p>
<p>The <code><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a36e261e9debd8c4aa650e9d5aedd7314">remaining()</a></code> time until period expiration is signed positive before, and negative after period expiration until <code><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a2bef026e4e683303266e2bebe538c63f">execute()</a></code> is called. If the timer is stopped, <code><a class="el" href="classxpcc_1_1_generic_periodic_timer.html#a36e261e9debd8c4aa650e9d5aedd7314">remaining()</a></code> returns zero.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classxpcc_1_1_generic_timeout.html" title="Generic software timeout class for variable timebase and timestamp width. ">GenericTimeout</a></dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname"><a class="el" href="classxpcc_1_1_clock.html" title="Internal system-tick timer. ">Clock</a></td><td>Used clock which inherits from <a class="el" href="classxpcc_1_1_clock.html" title="Internal system-tick timer. ">xpcc::Clock</a>, may have a variable timebase. </td></tr>
    <tr><td class="paramname">TimestampType</td><td>Used timestamp which is compatible with the chosen <a class="el" href="classxpcc_1_1_clock.html" title="Internal system-tick timer. ">Clock</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Fabian Greif </dd>
<dd>
Niklas Hauser </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a2bef026e4e683303266e2bebe538c63f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bef026e4e683303266e2bebe538c63f">&#9670;&nbsp;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Clock, typename TimestampType = xpcc::Timestamp&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classxpcc_1_1_generic_periodic_timer.html">xpcc::GenericPeriodicTimer</a>&lt; <a class="el" href="classxpcc_1_1_clock.html">Clock</a>, TimestampType &gt;::execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><code>true</code> exactly once during each period </dd></dl>

</div>
</div>
<a id="a36e261e9debd8c4aa650e9d5aedd7314"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36e261e9debd8c4aa650e9d5aedd7314">&#9670;&nbsp;</a></span>remaining()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Clock, typename TimestampType = xpcc::Timestamp&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TimestampType::SignedType <a class="el" href="classxpcc_1_1_generic_periodic_timer.html">xpcc::GenericPeriodicTimer</a>&lt; <a class="el" href="classxpcc_1_1_clock.html">Clock</a>, TimestampType &gt;::remaining </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the time until (positive time) or since (negative time) expiration, or 0 if stopped </dd></dl>

</div>
</div>
<a id="ac70aa47213a9117802e74e4291acab87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac70aa47213a9117802e74e4291acab87">&#9670;&nbsp;</a></span>getState()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Clock, typename TimestampType = xpcc::Timestamp&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__software__timer.html#gabcc9087dd7bf4f67559efacad4f622d8">PeriodicTimerState</a> <a class="el" href="classxpcc_1_1_generic_periodic_timer.html">xpcc::GenericPeriodicTimer</a>&lt; <a class="el" href="classxpcc_1_1_clock.html">Clock</a>, TimestampType &gt;::getState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the current state of the timer </dd></dl>

</div>
</div>
<a id="a7624cbce4fb8c4be66a63740a5e9b484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7624cbce4fb8c4be66a63740a5e9b484">&#9670;&nbsp;</a></span>isStopped()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Clock, typename TimestampType = xpcc::Timestamp&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classxpcc_1_1_generic_periodic_timer.html">xpcc::GenericPeriodicTimer</a>&lt; <a class="el" href="classxpcc_1_1_clock.html">Clock</a>, TimestampType &gt;::isStopped </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the timer has been stopped, <code>false</code> otherwise </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>periodic_timer.hpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacexpcc.html">xpcc</a></li><li class="navelem"><a class="el" href="classxpcc_1_1_generic_periodic_timer.html">GenericPeriodicTimer</a></li>
    <li class="footer">Generated on Tue Jun 27 2017 20:03:53 for xpcc by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
