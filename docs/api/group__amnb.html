<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>xpcc: Asynchronous Multi-Node Bus (AMNB)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">xpcc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>API</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="../index.html"><span>General</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__amnb.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Asynchronous Multi-Node Bus (AMNB)<div class="ingroups"><a class="el" href="group__communication.html">Communication</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1amnb_1_1_interface.html">xpcc::amnb::Interface&lt; Device, PROBABILITY, TIMEOUT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMNB interface.  <a href="classxpcc_1_1amnb_1_1_interface.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1amnb_1_1_response.html">xpcc::amnb::Response</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classxpcc_1_1amnb_1_1_response.html" title="Response object for an action call. ">Response</a> object for an action call.  <a href="classxpcc_1_1amnb_1_1_response.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structxpcc_1_1amnb_1_1_callable"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__amnb.html#structxpcc_1_1amnb_1_1_callable">xpcc::amnb::Callable</a></td></tr>
<tr class="memdesc:structxpcc_1_1amnb_1_1_callable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base-class for every object which should be used inside a callback.  <a href="group__amnb.html#structxpcc_1_1amnb_1_1_callable">More...</a><br /></td></tr>
<tr class="separator:structxpcc_1_1amnb_1_1_callable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxpcc_1_1amnb_1_1_action.html">xpcc::amnb::Action</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Possible <a class="el" href="structxpcc_1_1amnb_1_1_action.html" title="Possible Action. ">Action</a>.  <a href="structxpcc_1_1amnb_1_1_action.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxpcc_1_1amnb_1_1_listener.html">xpcc::amnb::Listener</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Possible <a class="el" href="structxpcc_1_1amnb_1_1_listener.html" title="Possible Listener. ">Listener</a>.  <a href="structxpcc_1_1amnb_1_1_listener.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxpcc_1_1amnb_1_1_error_handler.html">xpcc::amnb::ErrorHandler</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Possible Error.  <a href="structxpcc_1_1amnb_1_1_error_handler.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1amnb_1_1_node.html">xpcc::amnb::Node&lt; Interface &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMNB <a class="el" href="classxpcc_1_1amnb_1_1_node.html" title="AMNB Node. ">Node</a>.  <a href="classxpcc_1_1amnb_1_1_node.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga5ba1d96e88ef2e3189fc07af8f758a94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__amnb.html#ga5ba1d96e88ef2e3189fc07af8f758a94">AMNB__ACTION</a>(command,  object,  function,  length)</td></tr>
<tr class="memdesc:ga5ba1d96e88ef2e3189fc07af8f758a94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a amnb::Action.  <a href="#ga5ba1d96e88ef2e3189fc07af8f758a94">More...</a><br /></td></tr>
<tr class="separator:ga5ba1d96e88ef2e3189fc07af8f758a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9e174dbfa0dff218a593e63321d0cce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__amnb.html#gac9e174dbfa0dff218a593e63321d0cce">AMNB__LISTEN</a>(address,  command,  object,  function)</td></tr>
<tr class="memdesc:gac9e174dbfa0dff218a593e63321d0cce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a amnb::Listener.  <a href="#gac9e174dbfa0dff218a593e63321d0cce">More...</a><br /></td></tr>
<tr class="separator:gac9e174dbfa0dff218a593e63321d0cce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac462596130c1e5f05fffe34773311e1c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__amnb.html#gac462596130c1e5f05fffe34773311e1c">AMNB__ERROR</a>(address,  command,  object,  function)</td></tr>
<tr class="memdesc:gac462596130c1e5f05fffe34773311e1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a amnb::ErrorHandler.  <a href="#gac462596130c1e5f05fffe34773311e1c">More...</a><br /></td></tr>
<tr class="separator:gac462596130c1e5f05fffe34773311e1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gac3b87049713c290d3ae496621d7536b4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__amnb.html#gac3b87049713c290d3ae496621d7536b4">xpcc::amnb::Error</a> { <br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4a1edbc2c629ffee54b54e3912008e11b8">xpcc::amnb::ERROR__GENERAL_ERROR</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4a89948133759c53ab5adfdcfe85a6b4e5">xpcc::amnb::ERROR__ACTION_NO_ACTION</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4a1824225512dd1f2e8a9eee28c5cb5d43">xpcc::amnb::ERROR__ACTION_WRONG_PAYLOAD_LENGTH</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4abeb9e2bbad9cd0ef4ce44e458ac385b6">xpcc::amnb::ERROR__ACTION_NO_RESPONSE</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4a85d1cf4cd479920b731f7dc0910063b0">xpcc::amnb::ERROR__QUERY_ERROR_CODE</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4a44e3f625c1b45df1f34a6a7467446ace">xpcc::amnb::ERROR__QUERY_TIMEOUT</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4a2e2f363220d35e24db2d5088b9d6162b">xpcc::amnb::ERROR__QUERY_WRONG_PAYLOAD_LENGTH</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4a78a185247b3245f0447bbb6827217977">xpcc::amnb::ERROR__QUERY_IN_PROGRESS</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4a3dc022d1e4841591305f620e3d100369">xpcc::amnb::ERROR__TRANSMITTER_BUSY</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#ggac3b87049713c290d3ae496621d7536b4a16a7c6c7b1e5302990dfb5b3ae529c6f">xpcc::amnb::ERROR__MESSAGE_OVERWRITTEN</a>
<br />
 }<tr class="memdesc:gac3b87049713c290d3ae496621d7536b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error code.  <a href="group__amnb.html#gac3b87049713c290d3ae496621d7536b4">More...</a><br /></td></tr>
<tr class="separator:gac3b87049713c290d3ae496621d7536b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
<tr class="memitem:ga9d51acabbd29c61b9931e2ebae600686"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__amnb.html#ga9d51acabbd29c61b9931e2ebae600686">xpcc::amnb::Flags</a> { <br />
&#160;&#160;<a class="el" href="group__amnb.html#gga9d51acabbd29c61b9931e2ebae600686a1ad0dc82868c547f4ceb989b4b104f8c">xpcc::amnb::BROADCAST</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#gga9d51acabbd29c61b9931e2ebae600686abc0cc523493221a5252ba5158ad1eb49">xpcc::amnb::REQUEST</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#gga9d51acabbd29c61b9931e2ebae600686a3d15367875437d4704134aa896c09547">xpcc::amnb::NACK</a>, 
<br />
&#160;&#160;<a class="el" href="group__amnb.html#gga9d51acabbd29c61b9931e2ebae600686a0854ac17d8dcb980a1218b1fccad5269">xpcc::amnb::ACK</a>
<br />
 }<tr class="memdesc:ga9d51acabbd29c61b9931e2ebae600686"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags.  <a href="group__amnb.html#ga9d51acabbd29c61b9931e2ebae600686">More...</a><br /></td></tr>
<tr class="separator:ga9d51acabbd29c61b9931e2ebae600686"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga3373b80bb1a758b8821487802750735d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3373b80bb1a758b8821487802750735d"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__amnb.html#ga3373b80bb1a758b8821487802750735d">xpcc::amnb::maxPayloadLength</a></td></tr>
<tr class="memdesc:ga3373b80bb1a758b8821487802750735d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum length for the payload. <br /></td></tr>
<tr class="separator:ga3373b80bb1a758b8821487802750735d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="amnb_intro"></a>
Introduction</h1>
<p>The AMNB (**A**synchronous **M**ulti-**N**ode **B**us) is a multi-master bus system, using p-persitent CSMA to send messages.</p>
<p>One bus can be populated with up to 64 nodes. The nodes can be queried for data and they will respond like an SAB Slave, and can query data from other nodes like an SAB Master, or they can just broadcast a message. Each node can listen to all the responses and broadcasts and store that information for its purpose.</p>
<p>Action callbacks to query requests can be defined as well as universal callbacks to any transmitted messaged (Listener callbacks). As an optional advanced feature, error handling callbacks can also be defined, which fire if messages have not been able to be sent, or requests timed out or misbehaved in other manners, or other nodes query unavailable information.</p>
<h1><a class="anchor" id="amnb_protocol"></a>
Protocol</h1>
<p>Features:</p><ul>
<li>Maximum payload length is 32 byte.</li>
<li>CRC8 (1-Wire)</li>
</ul>
<h2><a class="anchor" id="structure"></a>
Structure</h2>
<pre class="fragment">+------+--------+--------+---------+--------------+-----+
| SYNC | LENGTH | HEADER | COMMAND | ... DATA ... | CRC |
+------+--------+--------+---------+--------------+-----+
</pre><ul>
<li><code>SYNC</code> - Synchronization byte (always 0x54)</li>
<li><code>LENGTH</code> - Length of the payload (without header, command and CRC byte)</li>
<li><code>HEADER</code> - Address of the slave and two flag bits</li>
<li><code>COMMAND</code> - Command code</li>
<li><code>DATA</code> - Up to 32 byte of payload</li>
<li><code>CRC</code> - CRC-8 checksum (iButton)</li>
</ul>
<h3><a class="anchor" id="header"></a>
Header</h3>
<pre class="fragment">  7   6   5   4   3   2   1   0
+---+---+---+---+---+---+---+---+
| Flags |      ADDRESS          |
+---+---+---+---+---+---+---+---+

  Flags | Meaning
--------+---------
  0   0 | data broadcast by a node
  0   1 | data request by a node
  1   0 | negative response from the node (NACK)
  1   1 | positive response from the node (ACK)
</pre><p>When transmitting, the <em>second bit</em> determines, whether or not to expect an answer from the addressed node. To just send information without any need for acknowledgment, use a broadcast. When a node is responding, the <em>second bit</em> has to following meaning:</p>
<ul>
<li><code>true</code> - Message is an positive response and may contain a payload</li>
<li><code>false</code> - Message signals an error condition and carries only one byte of payload. This byte is an error code.</li>
</ul>
<h1><a class="anchor" id="amnb_electric"></a>
Electrical characteristics</h1>
<p>Between different boards CAN transceivers are used. Compared to RS485 the CAN transceivers have the advantage to work without a separate direction input. You can just connected the transceiver directly to the UART of your microcontroller. These are identical to the SAB CAN electrical characteristics. You have to use the CAN transceivers, otherwise it cannot be determined, if the bus is busy or available for transmission.</p>
<dl class="section author"><dt>Author</dt><dd>Fabian Greif </dd>
<dd>
Niklas Hauser </dd></dl>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="structxpcc_1_1amnb_1_1_callable" id="structxpcc_1_1amnb_1_1_callable"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct xpcc::amnb::Callable</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Example: </p><div class="fragment"><div class="line"><span class="keyword">class </span>Sensor : <span class="keyword">public</span> <a class="code" href="group__amnb.html#structxpcc_1_1amnb_1_1_callable">xpcc::amnb::Callable</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">void</span></div>
<div class="line">    sendValue(<a class="code" href="classxpcc_1_1amnb_1_1_response.html">xpcc::amnb::Response</a>&amp; response)</div>
<div class="line">    {</div>
<div class="line">        response.<a class="code" href="classxpcc_1_1amnb_1_1_response.html#abf40a63a7c5d8c3f853cdc705ddee3de">send</a>(this-&gt;value);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    int8_t value;</div>
<div class="line">};</div>
</div><!-- fragment --><p>A complete example is available in the <code>example/amnb</code> folder.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classxpcc_1_1amnb_1_1_node.html" title="AMNB Node. ">xpcc::amnb::Node</a> </dd></dl>
</div>
</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga5ba1d96e88ef2e3189fc07af8f758a94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AMNB__ACTION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">command, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">object, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">function, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Example: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;class Sensor : public xpcc::amnb::Callable</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;public:</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    void</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    sendValue(xpcc::amnb::Response&amp; response)</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    {</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        response.send(this-&gt;value);</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    }</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    void</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    doSomething(xpcc::amnb::Response&amp; response, const uint32_t* parameter)</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    {</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        // ... do something useful ...</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        response.send();</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    }</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    // ...</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;private:</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    int8_t value;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;};</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;Sensor sensor;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;FLASH_STORAGE(xpcc::amnb::Action actionList[]) =</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    AMNB__ACTION(0x57, sensor, Sensor::sendValue,   0),</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    AMNB__ACTION(0x03, sensor, Sensor::doSomething, sizeof(uint32_t)),</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;};</div>
</div><!-- fragment --><p>A complete example is available in the <code>example/amnb</code> folder.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>Command byte </td></tr>
    <tr><td class="paramname">object</td><td></td></tr>
    <tr><td class="paramname">function</td><td>Member function of object </td></tr>
    <tr><td class="paramname">length</td><td>Parameter size in bytes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structxpcc_1_1amnb_1_1_action.html" title="Possible Action. ">xpcc::amnb::Action</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gac9e174dbfa0dff218a593e63321d0cce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AMNB__LISTEN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">address, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">command, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">object, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">function&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Example: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;class ListenToNodes : public xpcc::amnb::Callable</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;public:</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    void</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    listenToCommand(uint8_t *payload, const uint8_t length, uint8_t sender)</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    {</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        // ... do something useful ...</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    }</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    void</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    listenToCommandWithOutCaringForSender(uint8_t *payload, const uint8_t length)</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    {</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        // ... do something useful ...</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    }</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    // ...</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;};</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;ListenToNodes listen;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;FLASH_STORAGE(xpcc::amnb::Listener listenList[]) =</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    AMNB__LISTEN(0x46, 0x03, listen, ListenToNodes::listenToCommand),</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;};</div>
</div><!-- fragment --><p>A complete example is available in the <code>example/amnb</code> folder.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>Address of the transmitting node </td></tr>
    <tr><td class="paramname">command</td><td>Command byte </td></tr>
    <tr><td class="paramname">object</td><td></td></tr>
    <tr><td class="paramname">function</td><td>Member function of object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structxpcc_1_1amnb_1_1_listener.html" title="Possible Listener. ">xpcc::amnb::Listener</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gac462596130c1e5f05fffe34773311e1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AMNB__ERROR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">address, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">command, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">object, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">function&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Example: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;class handleErrors : public xpcc::amnb::Callable</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;public:</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    void</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    errorForCommand(xpcc::amnb::Flags type, const uint8_t errorCode)</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    {</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        // ... do something useful with that information ...</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    }</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    // ...</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;};</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;handleErrors errorhandler;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;FLASH_STORAGE(xpcc::amnb::Listener listenList[]) =</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;{</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    AMNB__LISTEN(0x37, 0x57, errorhandler, handleErrors::errorForCommand),</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;};</div>
</div><!-- fragment --><p>A complete example is available in the <code>example/amnb</code> folder.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>Node address of message </td></tr>
    <tr><td class="paramname">command</td><td>Command of message </td></tr>
    <tr><td class="paramname">object</td><td></td></tr>
    <tr><td class="paramname">function</td><td>Member function of object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structxpcc_1_1amnb_1_1_error_handler.html" title="Possible Error. ">xpcc::amnb::ErrorHandler</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gac3b87049713c290d3ae496621d7536b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__amnb.html#gac3b87049713c290d3ae496621d7536b4">xpcc::amnb::Error</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Error codes below 0x20 are reserved for the system. Every other code may be used by user. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4a1edbc2c629ffee54b54e3912008e11b8"></a>ERROR__GENERAL_ERROR&#160;</td><td class="fielddoc">
<p>Universal error code. </p>
<p>Use this code if you're not sure what error to signal. If the user should react to the error code, create a specific one for the given problem. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4a89948133759c53ab5adfdcfe85a6b4e5"></a>ERROR__ACTION_NO_ACTION&#160;</td><td class="fielddoc">
<p>No corresponding action found for this command. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4a1824225512dd1f2e8a9eee28c5cb5d43"></a>ERROR__ACTION_WRONG_PAYLOAD_LENGTH&#160;</td><td class="fielddoc">
<p>Unexpected payload length. </p>
<p>The payload length of the received message differs from the expected length for the given command. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4abeb9e2bbad9cd0ef4ce44e458ac385b6"></a>ERROR__ACTION_NO_RESPONSE&#160;</td><td class="fielddoc">
<p>No response given by the user. </p>
<p>This error code is generated when no response method is called by the user during an action callback. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4a85d1cf4cd479920b731f7dc0910063b0"></a>ERROR__QUERY_ERROR_CODE&#160;</td><td class="fielddoc">
<p>Query answer contains an more detailed error code. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4a44e3f625c1b45df1f34a6a7467446ace"></a>ERROR__QUERY_TIMEOUT&#160;</td><td class="fielddoc">
<p>Query timed out. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4a2e2f363220d35e24db2d5088b9d6162b"></a>ERROR__QUERY_WRONG_PAYLOAD_LENGTH&#160;</td><td class="fielddoc">
<p>Query answer has wrong payload length. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4a78a185247b3245f0447bbb6827217977"></a>ERROR__QUERY_IN_PROGRESS&#160;</td><td class="fielddoc">
<p>Query is already in progress. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4a3dc022d1e4841591305f620e3d100369"></a>ERROR__TRANSMITTER_BUSY&#160;</td><td class="fielddoc">
<p><a class="el" href="classxpcc_1_1amnb_1_1_interface.html" title="AMNB interface. ">Interface</a> is currently transmitting. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggac3b87049713c290d3ae496621d7536b4a16a7c6c7b1e5302990dfb5b3ae529c6f"></a>ERROR__MESSAGE_OVERWRITTEN&#160;</td><td class="fielddoc">
<p>Another message will be transmitted before this one. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="ga9d51acabbd29c61b9931e2ebae600686"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__amnb.html#ga9d51acabbd29c61b9931e2ebae600686">xpcc::amnb::Flags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga9d51acabbd29c61b9931e2ebae600686a1ad0dc82868c547f4ceb989b4b104f8c"></a>BROADCAST&#160;</td><td class="fielddoc">
<p>send a message without getting a response </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga9d51acabbd29c61b9931e2ebae600686abc0cc523493221a5252ba5158ad1eb49"></a>REQUEST&#160;</td><td class="fielddoc">
<p>request data from a node </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga9d51acabbd29c61b9931e2ebae600686a3d15367875437d4704134aa896c09547"></a>NACK&#160;</td><td class="fielddoc">
<p>data request Negative ACKnowledge </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga9d51acabbd29c61b9931e2ebae600686a0854ac17d8dcb980a1218b1fccad5269"></a>ACK&#160;</td><td class="fielddoc">
<p>data request positive ACKnowledge </p>
</td></tr>
</table>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Nov 20 2016 22:41:21 for xpcc by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
